<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>JaKòb - Donation Amount</title>
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<!-- Material Symbols -->
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<!-- Theme Config -->
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ea2a33",
                        "primary-dark": "#c91b24",
                        "background-light": "#f8f6f6",
                        "background-dark": "#211111",
                        "surface-dark": "#2f1a1b",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "1rem",
                        "sm": "0.5rem",
                        "md": "0.75rem",
                        "lg": "1.5rem",
                        "xl": "2rem",
                        "2xl": "2.5rem",
                        "3xl": "3rem",
                        "full": "9999px"
                    },
                    backgroundImage: {
                        'taino-pattern': "radial-gradient(circle at center, #ea2a3315 0%, transparent 70%)"
                    }
                },
            },
        }
    </script>
<style>
        .material-symbols-outlined {
            font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24;
        }
        /* Custom scrollbar hiding for clean UI */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-background-light dark:bg-background-dark font-display antialiased selection:bg-primary selection:text-white">
<!-- Main Container -->
<div class="relative flex h-full min-h-screen w-full flex-col overflow-x-hidden text-slate-900 dark:text-white pb-6">
<!-- Ambient Background Glow (The "Heart") -->
<div class="fixed inset-0 z-0 pointer-events-none bg-taino-pattern"></div>
<!-- Header -->
<header class="relative z-10 flex items-center justify-between p-4 pt-6">
<a href="home.html" class="flex size-10 items-center justify-center rounded-full bg-white/5 text-white hover:bg-white/10 transition-colors">
<span class="material-symbols-outlined">arrow_back</span>
</a>
<h2 class="text-base font-bold tracking-wide uppercase text-white/80">Support Creator</h2>
<button class="flex size-10 items-center justify-center rounded-full bg-white/5 text-white hover:bg-white/10 transition-colors">
<span class="material-symbols-outlined">more_vert</span>
</button>
</header>
<!-- Main Content -->
<main class="relative z-10 flex flex-1 flex-col items-center px-6 gap-6">
<!-- Creator Profile Profile -->
<div class="flex flex-col items-center gap-4 mt-2">
<div class="relative group">
<!-- Pulsing ring effect -->
<div class="absolute -inset-1 rounded-full bg-primary/20 blur-md group-hover:bg-primary/40 transition-all duration-500"></div>
<div class="relative size-28 rounded-full border-2 border-primary p-1">
<div id="creatorAvatar" class="h-full w-full rounded-full bg-cover bg-center"></div>
</div>
<!-- Verified Badge -->
<div id="verifiedBadge" class="absolute bottom-1 right-1 flex size-8 items-center justify-center rounded-full bg-primary text-white border-2 border-background-dark hidden">
<span class="material-symbols-outlined text-[16px]">verified</span>
</div>
</div>
<div class="text-center space-y-1">
<h1 id="creatorName" class="text-2xl font-extrabold tracking-tight text-white">Loading...</h1>
<p id="creatorInfo" class="text-primary font-medium text-sm"></p>
<p id="creatorBio" class="text-white/60 text-sm max-w-[260px] mx-auto leading-relaxed"></p>
</div>
</div>
<!-- Amount Selector (Chips) -->
<div class="w-full mt-2">
<p class="text-center text-sm font-semibold text-white/50 mb-4 uppercase tracking-widest text-[10px]">Select Amount (HTG)</p>
<div class="grid grid-cols-4 gap-3">
<button class="flex h-12 items-center justify-center rounded-full border border-white/10 bg-surface-dark hover:bg-white/5 hover:border-primary/50 transition-all active:scale-95">
<span class="text-sm font-bold text-white">50</span>
</button>
<button class="flex h-12 items-center justify-center rounded-full bg-primary shadow-[0_0_15px_rgba(234,42,51,0.4)] transition-transform active:scale-95">
<span class="text-sm font-bold text-white">100</span>
</button>
<button class="flex h-12 items-center justify-center rounded-full border border-white/10 bg-surface-dark hover:bg-white/5 hover:border-primary/50 transition-all active:scale-95">
<span class="text-sm font-bold text-white">250</span>
</button>
<button class="flex h-12 items-center justify-center rounded-full border border-white/10 bg-surface-dark hover:bg-white/5 hover:border-primary/50 transition-all active:scale-95">
<span class="text-sm font-bold text-white">500</span>
</button>
</div>
</div>
<!-- Custom Amount Input -->
<div class="w-full flex-1 flex flex-col justify-center items-center py-4">
<label class="text-sm text-white/60 mb-2 font-medium" for="custom-amount">Or enter custom amount</label>
<div class="relative flex items-center justify-center">
<span class="text-3xl font-bold text-white/40 mr-2">HTG</span>
<input class="bg-transparent border-none text-center text-5xl font-extrabold text-white placeholder:text-white/20 focus:ring-0 p-0 w-[200px]" id="custom-amount" placeholder="0.00" type="number" value="100"/>
</div>
<!-- Currency Toggle / Info -->
<div class="mt-2 flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/5 border border-white/5">
<span class="size-1.5 rounded-full bg-green-500 animate-pulse"></span>
<span class="text-[10px] uppercase font-bold tracking-wide text-white/70">MonCash / NatCash</span>
</div>
</div>
<!-- Payment Methods Visual -->
<div class="flex items-center gap-4 opacity-50 grayscale hover:grayscale-0 transition-all duration-300 mb-2">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-red-500">account_balance_wallet</span>
<span class="text-xs font-bold text-white/80">MonCash</span>
</div>
<div class="h-3 w-px bg-white/20"></div>
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-blue-500">payments</span>
<span class="text-xs font-bold text-white/80">Natcash</span>
</div>
</div>
<!-- Action Button -->
<button class="group relative w-full overflow-hidden rounded-full bg-primary p-4 transition-all hover:bg-primary-dark active:scale-[0.98]">
<div class="relative z-10 flex items-center justify-center gap-2">
<span class="material-symbols-outlined fill-1">favorite</span>
<span class="text-lg font-bold text-white">Send Love</span>
</div>
<!-- Subtle texture overlay on button -->
<div class="absolute inset-0 z-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
</button>
<p class="text-xs text-center text-white/30 mt-1">
                Secure transaction processed securely via JaKòb.
            </p>
</main>
</div>
    <!-- User Data Loader -->
    <script src="/assets/js/user-data.js"></script>
    <script src="/assets/js/donation-modal.js"></script>

    <script>
        let currentInfluencer = null;
        let currentCampaign = null;
        let selectedAmount = 100;

        // Update selected amount
        function updateAmount(amount) {
            selectedAmount = amount;
            document.getElementById('custom-amount').value = amount;

            // Update button states
            document.querySelectorAll('.grid.grid-cols-4 button').forEach((btn, idx) => {
                const amounts = [50, 100, 250, 500];
                if (amounts[idx] === amount) {
                    btn.className = 'flex h-12 items-center justify-center rounded-full bg-primary shadow-[0_0_15px_rgba(234,42,51,0.4)] transition-transform active:scale-95';
                } else {
                    btn.className = 'flex h-12 items-center justify-center rounded-full border border-white/10 bg-surface-dark hover:bg-white/5 hover:border-primary/50 transition-all active:scale-95';
                }
            });
        }

        document.addEventListener('DOMContentLoaded', async () => {
            // Get influencer ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const influencerId = urlParams.get('influencer_id');

            if (!influencerId) {
                console.error('No influencer ID provided');
                window.location.href = 'home.html';
                return;
            }

            // Load influencer details
            try {
                const response = await fetch(`/api/get-influencer.php?id=${influencerId}`);
                const result = await response.json();

                if (result.success && result.influencer) {
                    currentInfluencer = result.influencer;

                    // Update creator profile
                    const avatarUrl = currentInfluencer.avatar_url || `https://ui-avatars.com/api/?name=${encodeURIComponent(currentInfluencer.display_name)}&background=ea2a33&color=fff&size=256&bold=true`;
                    document.getElementById('creatorAvatar').style.backgroundImage = `url('${avatarUrl}')`;
                    document.getElementById('creatorName').textContent = currentInfluencer.display_name;
                    document.getElementById('creatorInfo').textContent = `${currentInfluencer.category} • ${currentInfluencer.location || 'Haiti'}`;
                    document.getElementById('creatorBio').textContent = currentInfluencer.bio || 'Your contribution keeps the culture alive and vibrant.';

                    if (currentInfluencer.verified) {
                        document.getElementById('verifiedBadge').classList.remove('hidden');
                    }

                    // Load active campaign for this influencer
                    const campaignsResponse = await fetch(`/api/get-campaigns.php?influencer_id=${influencerId}&status=active&limit=1`);
                    const campaignsResult = await campaignsResponse.json();

                    if (campaignsResult.success && campaignsResult.campaigns && campaignsResult.campaigns.length > 0) {
                        currentCampaign = campaignsResult.campaigns[0];
                    }
                } else {
                    console.error('Failed to load influencer:', result.message);
                    window.location.href = 'home.html';
                }
            } catch (error) {
                console.error('Error loading influencer:', error);
                window.location.href = 'home.html';
            }

            // Amount buttons click handlers
            const amountButtons = document.querySelectorAll('.grid.grid-cols-4 button');
            const amounts = [50, 100, 250, 500];
            amountButtons.forEach((btn, idx) => {
                btn.addEventListener('click', () => updateAmount(amounts[idx]));
            });

            // Custom amount input
            document.getElementById('custom-amount').addEventListener('input', (e) => {
                selectedAmount = parseFloat(e.target.value) || 0;
                // Deselect all preset buttons
                amountButtons.forEach(btn => {
                    btn.className = 'flex h-12 items-center justify-center rounded-full border border-white/10 bg-surface-dark hover:bg-white/5 hover:border-primary/50 transition-all active:scale-95';
                });
            });

            // Send Love button
            document.querySelector('button.bg-primary').addEventListener('click', async () => {
                if (!currentCampaign) {
                    alert('No active campaign found for this creator. Please check back later.');
                    return;
                }

                if (selectedAmount <= 0) {
                    alert('Please enter a valid amount');
                    return;
                }

                // Use the donation modal
                showDonationModal(currentCampaign.id, currentCampaign.title, currentInfluencer.display_name);

                // Pre-fill the amount
                setTimeout(() => {
                    const amountInput = document.getElementById('customAmount');
                    if (amountInput) {
                        amountInput.value = selectedAmount;
                        const event = new Event('input', { bubbles: true });
                        amountInput.dispatchEvent(event);
                    }
                }, 100);
            });
        });
    </script>
</body></html>